<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athletic Development Training System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.2s ease;
        }

        :root {
            --primary-color: #2563eb;
            --success-color: #16a34a;
            --warning-color: #ea580c;
            --error-color: #dc2626;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --text-tertiary: #94a3b8;
            
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
        }
    
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
        }
    
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
    
        .header {
            background: var(--bg-primary);
            padding: 32px;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            margin-bottom: 24px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
    
        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
    
        .header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
    
        .subtitle {
            color: var(--text-tertiary);
            font-size: 1rem;
            font-style: italic;
        }
    
        .warning-banner {
            background: var(--warning-color);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: 600;
            margin-bottom: 20px;
            border-radius: 8px;
        }
    
        .card {
            background: var(--bg-primary);
            border-radius: 12px;
            padding: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            margin-bottom: 24px;
        }
    
        .card h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }
    
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            margin-bottom: 32px;
            position: relative;
        }
    
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }
    
        .progress-step::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: var(--border-color);
            z-index: -1;
        }
    
        .progress-step:last-child::after {
            display: none;
        }
    
        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 8px;
        }
    
        .progress-step.active .progress-circle {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
    
        .progress-step.completed .progress-circle {
            background: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }
    
        .progress-label {
            font-size: 12px;
            color: var(--text-tertiary);
            text-align: center;
        }
    
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
    
        .option-card {
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }
    
        .option-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
    
        .option-card.selected {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }
    
        .option-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
    
        .option-desc {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
    
        .template-selector {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
    
        .template-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
    
        .template-tab {
            padding: 8px 16px;
            border-radius: 6px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }
    
        .template-tab:hover {
            border-color: var(--primary-color);
        }
    
        .template-tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
    
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.2);
            transition: all 0.2s ease;
        }
    
        .btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
        }
    
        .btn:disabled {
            background: var(--text-tertiary);
            cursor: not-allowed;
            transform: none;
        }
    
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            box-shadow: none;
        }
    
        .btn-secondary:hover {
            background: var(--bg-secondary);
            border-color: var(--primary-color);
        }
    
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
    
        .workout-day {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
        }
    
        .workout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
    
        .workout-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
    
        .workout-badge {
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
    
        .exercise-block {
            background: var(--bg-primary);
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid var(--border-color);
        }
    
        .exercise-category {
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 8px;
        }
    
        .exercise-name {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
    
        .exercise-details {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
    
        .substitution-notice {
            background: rgba(234, 88, 12, 0.1);
            color: var(--warning-color);
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 13px;
            margin-top: 8px;
            font-weight: 500;
        }
    
        .info-box {
            background: var(--bg-tertiary);
            border-left: 4px solid var(--primary-color);
            padding: 16px;
            margin: 20px 0;
            border-radius: 4px;
        }
    
        .info-box h4 {
            margin-bottom: 8px;
            color: var(--text-primary);
        }
    
        .info-box ul {
            padding-left: 20px;
            color: var(--text-secondary);
        }
    
        .week-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 24px 0;
            padding: 16px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }
    
        .week-nav-btn {
            padding: 8px 16px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }
    
        .week-nav-btn:hover:not(:disabled) {
            border-color: var(--primary-color);
        }
    
        .week-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    
        .hidden {
            display: none;
        }
    
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
    
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    
        .category-max-effort { background: #dc2626; }
        .category-dynamic { background: #ea580c; }
        .category-repetition { background: #ca8a04; }
        .category-supplemental { background: #2563eb; }
        .category-assistance { background: #7c3aed; }
        .category-sprint { background: #0891b2; }
        .category-jump { background: #059669; }
        .category-throw { background: #c026d3; }
    
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
    
            .btn-group {
                flex-direction: column;
            }
    
            .template-tabs {
                flex-direction: column;
            }
        }
    </style>
    </head>
    <body>
    <div class="warning-banner">
        Always consult your doctor before starting any exercise program. Sprint and jump training carries inherent risks. Progressive overload and proper recovery are essential.
    </div>

    <div class="container">
        <div class="header">
            <h1>Athletic Development Training System</h1>
            <p>Real athletic training, adapted to your reality</p>
            <p class="subtitle">Sprint • Jump • Throw • Push • Pull • Hinge • Carry</p>
        </div>

        <!-- Welcome Screen -->
        <div id="welcomeScreen">
            <div class="card">
                <h2>Complete Athletic Development System</h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px; font-size: 1.1rem;">
                    Complete athletic training that adapts to your space, equipment, and context. 
                    Whether you're in a franchise gym, training remotely, or with a club team - 
                    we deliver the right program for your situation.
                </p>
                
                <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 8px; margin-bottom: 24px;">
                    <h3 style="margin-bottom: 12px; color: var(--text-primary);">Program Features:</h3>
                    <ul style="padding-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                        <li><strong>Periodized Strength:</strong> Max-effort, dynamic, and repetition methods</li>
                        <li><strong>Athletic Movement:</strong> Sprint, jump, and throw progressions</li>
                        <li><strong>Annual Planning:</strong> Off-season, pre-season, and in-season templates</li>
                        <li><strong>Experience-Based:</strong> Beginner to advanced progressions</li>
                        <li><strong>Context Adaptive:</strong> Adjusts to your equipment and space</li>
                    </ul>
                </div>

                <button class="btn" onclick="startOnboarding()" style="width: 100%; padding: 16px; font-size: 1.1rem;">
                    Get Started - 2 Minutes
                </button>
                
                <p style="color: var(--text-tertiary); font-size: 0.9rem; text-align: center; margin-top: 16px;">
                    Built for coaches and athletes • Equipment adaptive • Safety first
                </p>
            </div>
        </div>

        <!-- Progress Tracker (hidden initially) -->
    <div id="progressTracker" class="hidden">
        <div class="progress-tracker">
            <div class="progress-step" id="step1">
                <div class="progress-circle">1</div>
                <div class="progress-label">Experience</div>
            </div>
            <div class="progress-step" id="step2">
                <div class="progress-circle">2</div>
                <div class="progress-label">Phase</div>
            </div>
            <div class="progress-step" id="step3">
                <div class="progress-circle">3</div>
                <div class="progress-label">Context</div>
            </div>
            <div class="progress-step" id="step4">
                <div class="progress-circle">4</div>
                <div class="progress-label">Equipment</div>
            </div>
            <div class="progress-step" id="step5">
                <div class="progress-circle">5</div>
                <div class="progress-label">Program</div>
            </div>
        </div>
    </div>

    <!-- Experience Level Selection -->
    <div id="experienceScreen" class="hidden">
        <div class="card">
            <h2>Training Experience Level</h2>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                This determines your training volume, intensity, and exercise selection.
            </p>

            <div class="options-grid">
                <div class="option-card" onclick="selectExperience('beginner')">
                    <div class="option-title">Beginner</div>
                    <div class="option-desc">Less than 2 years of structured training. Focus on movement quality and building base.</div>
                </div>
                <div class="option-card" onclick="selectExperience('intermediate')">
                    <div class="option-title">Intermediate</div>
                    <div class="option-desc">2-5 years training. Can handle more volume and intensity variation.</div>
                </div>
                <div class="option-card" onclick="selectExperience('advanced')">
                    <div class="option-title">Advanced</div>
                    <div class="option-desc">5+ years consistent training. Ready for advanced methods and higher frequencies.</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goBack('welcome')">Back</button>
                <button class="btn hidden" id="experienceContinue" onclick="showPhaseScreen()">Continue</button>
            </div>
        </div>
    </div>

    <!-- Training Phase Selection -->
    <div id="phaseScreen" class="hidden">
        <div class="card">
            <h2>Current Training Phase</h2>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                Where are you in your annual training cycle?
            </p>

            <div class="options-grid">
                <div class="option-card" onclick="selectPhase('early-offseason')">
                    <div class="option-title">Early Off-Season</div>
                    <div class="option-desc">4-8 weeks post-competition. Recovery focus, building base, addressing imbalances.</div>
                </div>
                <div class="option-card" onclick="selectPhase('mid-offseason')">
                    <div class="option-title">Mid Off-Season</div>
                    <div class="option-desc">8-12 weeks. Maximum strength and muscle building phase. Highest volume.</div>
                </div>
                <div class="option-card" onclick="selectPhase('preseason')">
                    <div class="option-title">Pre-Season</div>
                    <div class="option-desc">4-6 weeks before competition. Converting strength to power, sport-specific.</div>
                </div>
                <div class="option-card" onclick="selectPhase('inseason')">
                    <div class="option-title">In-Season</div>
                    <div class="option-desc">During competition. Maintenance focus, managing fatigue, staying sharp.</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goBack('experience')">Back</button>
                <button class="btn hidden" id="phaseContinue" onclick="showContextScreen()">Continue</button>
            </div>
        </div>
    </div>

    <!-- Context Selection -->
    <div id="contextScreen" class="hidden">
        <div class="card">
            <h2>Training Context</h2>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                This helps us adapt the program structure to your situation.
            </p>

            <div class="options-grid">
                <div class="option-card" onclick="selectContext('franchise')">
                    <div class="option-title">Franchise Facility</div>
                    <div class="option-desc">D1, Velocity, F45 - standardized equipment, group training, time constraints</div>
                </div>
                <div class="option-card" onclick="selectContext('remote')">
                    <div class="option-title">Individual/Remote</div>
                    <div class="option-desc">Training alone, variable equipment, home gyms, traveling</div>
                </div>
                <div class="option-card" onclick="selectContext('team')">
                    <div class="option-title">Team/Club Sport</div>
                    <div class="option-desc">School or club team, group training, field access, mixed abilities</div>
                </div>
                <div class="option-card" onclick="selectContext('meathead')">
                    <div class="option-title">Washed-Up Meathead</div>
                    <div class="option-desc">Former athlete, training for life. Want to stay strong and healthy.</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goBack('phase')">Back</button>
                <button class="btn hidden" id="contextContinue" onclick="showEquipmentScreen()">Continue</button>
            </div>
        </div>
    </div>

    <!-- Equipment Selection -->
    <div id="equipmentScreen" class="hidden">
        <div class="card">
            <h2>Available Equipment & Space</h2>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                We'll adapt exercises based on what you have access to.
            </p>

            <div class="options-grid">
                <div class="option-card" onclick="selectEquipment('full')">
                    <div class="option-title">Full Facility</div>
                    <div class="option-desc">Barbells, racks, platforms, turf/track, full gym equipment</div>
                </div>
                <div class="option-card" onclick="selectEquipment('commercial')">
                    <div class="option-title">Commercial Gym</div>
                    <div class="option-desc">Standard gym equipment, dumbbells, machines, limited space</div>
                </div>
                <div class="option-card" onclick="selectEquipment('minimal')">
                    <div class="option-title">Minimal/Home</div>
                    <div class="option-desc">Bands, adjustable DBs, pull-up bar, limited equipment</div>
                </div>
                <div class="option-card" onclick="selectEquipment('bodyweight')">
                    <div class="option-title">Bodyweight Only</div>
                    <div class="option-desc">No equipment, parks, hotel rooms, travel situations</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goBack('context')">Back</button>
                <button class="btn hidden" id="equipmentContinue" onclick="generateProgram()">Generate Program</button>
            </div>
        </div>
    </div>

    <!-- Program Display -->
    <div id="programScreen" class="hidden">
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 id="programTitle">Your Program</h2>
                <button class="btn btn-secondary" onclick="resetApp()">Start Over</button>
            </div>

            <!-- Program Overview -->
            <div id="programOverview" class="info-box">
                <!-- Overview content generated dynamically -->
            </div>

            <!-- Template Selection -->
            <div class="template-selector">
                <h3 style="margin-bottom: 12px;">Select Training Week</h3>
                <div class="template-tabs">
                    <div class="template-tab active" onclick="selectTemplate('4day')">4-Day Template</div>
                    <div class="template-tab" onclick="selectTemplate('3day')">3-Day Template</div>
                    <div class="template-tab" onclick="selectTemplate('speed')">With Speed Work</div>
                    <div class="template-tab" onclick="selectTemplate('inseason')">In-Season</div>
                </div>
                <p style="color: var(--text-tertiary); font-size: 0.9rem; margin-top: 8px;">
                    Select the template that best fits your current schedule and goals
                </p>
            </div>

            <!-- Week Navigation -->
            <div class="week-navigation">
                <button class="week-nav-btn" onclick="previousWeek()" id="prevWeekBtn">← Previous Week</button>
                <div style="text-align: center;">
                    <div id="weekDisplay" style="font-weight: 600; font-size: 1.1rem;">Week 1</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">Accumulation Phase</div>
                </div>
                <button class="week-nav-btn" onclick="nextWeek()" id="nextWeekBtn">Next Week →</button>
            </div>

            <!-- Workout Days -->
            <div id="workoutDays">
                <!-- Workouts will be rendered here -->
            </div>

            <!-- Important Notes -->
            <div class="info-box" style="margin-top: 24px;">
                <h4>Important Guidelines</h4>
                <ul>
                    <li><strong>Warm-Up:</strong> Always perform 5-15 minutes of general warm-up before training</li>
                    <li><strong>Max-Effort:</strong> Work up to a heavy set, not necessarily a true max</li>
                    <li><strong>Recovery:</strong> Separate similar training days by at least 48 hours</li>
                    <li><strong>Indicator Exercises:</strong> Track your box squat, bench press, vertical jump, and chin-ups</li>
                    <li><strong>Adaptation:</strong> Modify volume and intensity based on how you feel</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
    // ==================== STATE MANAGEMENT ====================
    let userData = {
        experience: null,      // beginner, intermediate, advanced
        phase: null,          // early-offseason, mid-offseason, preseason, inseason
        context: null,        // franchise, remote, team, meathead
        equipment: null,      // full, commercial, minimal, bodyweight
        currentWeek: 1,
        currentTemplate: '4day'
    };

    // ==================== EXERCISE DATABASE ====================
    const exerciseDatabase = {
        // Max-Effort Upper Body Exercises
        benchPress: {
            name: "Bench Press",
            category: "max-effort",
            equipmentMap: {
                full: "Barbell Bench Press",
                commercial: "Dumbbell Bench Press",
                minimal: "Floor Press with DBs",
                bodyweight: "Weighted Push-ups"
            }
        },
        inclineBench: {
            name: "Incline Bench Press",
            category: "max-effort",
            equipmentMap: {
                full: "Barbell Incline Press",
                commercial: "DB Incline Press",
                minimal: "Incline DB Press (adjustable bench)",
                bodyweight: "Pike Push-ups"
            }
        },
        closeGripBench: {
            name: "Close-Grip Bench Press",
            category: "max-effort",
            equipmentMap: {
                full: "Close-Grip Barbell Press",
                commercial: "Close-Grip DB Press",
                minimal: "Diamond Push-ups",
                bodyweight: "Diamond Push-ups"
            }
        },
        
        // Max-Effort Lower Body Exercises
        boxSquat: {
            name: "Box Squat",
            category: "max-effort",
            equipmentMap: {
                full: "Box Squat",
                commercial: "Goblet Box Squat",
                minimal: "DB Box Squat",
                bodyweight: "Pause Squat to Box"
            }
        },
        deadlift: {
            name: "Deadlift",
            category: "max-effort",
            equipmentMap: {
                full: "Conventional Deadlift",
                commercial: "Trap Bar Deadlift",
                minimal: "DB Romanian Deadlift",
                bodyweight: "Single-Leg RDL"
            }
        },
        frontSquat: {
            name: "Front Squat",
            category: "max-effort",
            equipmentMap: {
                full: "Barbell Front Squat",
                commercial: "Goblet Squat",
                minimal: "DB Goblet Squat",
                bodyweight: "Jump Squat"
            }
        },
        
        // Dynamic-Effort Exercises (Jumps)
        boxJump: {
            name: "Box Jump",
            category: "dynamic",
            equipmentMap: {
                full: "Box Jump",
                commercial: "Box Jump",
                minimal: "Jump to Low Platform",
                bodyweight: "Vertical Jump"
            }
        },
        broadJump: {
            name: "Broad Jump",
            category: "dynamic",
            equipmentMap: {
                full: "Broad Jump",
                commercial: "Broad Jump",
                minimal: "Broad Jump",
                bodyweight: "Broad Jump"
            }
        },
        verticalJump: {
            name: "Vertical Jump",
            category: "dynamic",
            equipmentMap: {
                full: "Vertical Jump",
                commercial: "Vertical Jump",
                minimal: "Vertical Jump",
                bodyweight: "Squat Jump"
            }
        },
        
        // Supplemental Exercises
        dbBenchPress: {
            name: "DB Bench Press",
            category: "supplemental",
            equipmentMap: {
                full: "DB Bench Press",
                commercial: "DB Bench Press",
                minimal: "Floor Press",
                bodyweight: "Push-ups"
            }
        },
        dbIncline: {
            name: "DB Incline Press",
            category: "supplemental",
            equipmentMap: {
                full: "DB Incline Press",
                commercial: "DB Incline Press",
                minimal: "Incline Push-ups",
                bodyweight: "Incline Push-ups"
            }
        },
        
        // Assistance Exercises
        pullups: {
            name: "Pull-ups/Chin-ups",
            category: "assistance",
            equipmentMap: {
                full: "Weighted Chin-ups",
                commercial: "Pull-ups",
                minimal: "Band-Assisted Pull-ups",
                bodyweight: "Inverted Rows"
            }
        },
        rows: {
            name: "Rows",
            category: "assistance",
            equipmentMap: {
                full: "Barbell Rows",
                commercial: "DB Rows",
                minimal: "Band Rows",
                bodyweight: "Inverted Rows"
            }
        },
        facePulls: {
            name: "Face Pulls",
            category: "assistance",
            equipmentMap: {
                full: "Cable Face Pulls",
                commercial: "Band Face Pulls",
                minimal: "Band Pull-Aparts",
                bodyweight: "YTW Raises"
            }
        },
        rearDelts: {
            name: "Rear Delts",
            category: "assistance",
            equipmentMap: {
                full: "Rear Delt Flyes",
                commercial: "DB Rear Delt Flyes",
                minimal: "Band Pull-Aparts",
                bodyweight: "Prone Y-Raises"
            }
        },
        shrugs: {
            name: "Shrugs",
            category: "assistance",
            equipmentMap: {
                full: "Barbell Shrugs",
                commercial: "DB Shrugs",
                minimal: "Band Shrugs",
                bodyweight: "Handstand Shrugs"
            }
        },
        curls: {
            name: "Bicep Curls",
            category: "assistance",
            equipmentMap: {
                full: "Barbell Curls",
                commercial: "DB Curls",
                minimal: "Band Curls",
                bodyweight: "Chin-up Holds"
            }
        },
        
        // Lower Body Assistance
        bulgarianSplitSquat: {
            name: "Bulgarian Split Squat",
            category: "assistance",
            equipmentMap: {
                full: "Barbell Bulgarian Split Squat",
                commercial: "DB Bulgarian Split Squat",
                minimal: "Bodyweight Bulgarian Split Squat",
                bodyweight: "Rear-Foot Elevated Split Squat"
            }
        },
        lunges: {
            name: "Lunges",
            category: "assistance",
            equipmentMap: {
                full: "Walking Lunges with Barbell",
                commercial: "DB Walking Lunges",
                minimal: "Reverse Lunges",
                bodyweight: "Jump Lunges"
            }
        },
        rdl: {
            name: "Romanian Deadlift",
            category: "assistance",
            equipmentMap: {
                full: "Barbell RDL",
                commercial: "DB RDL",
                minimal: "Single DB RDL",
                bodyweight: "Single-Leg RDL"
            }
        },
        hyperextensions: {
            name: "Back Extensions",
            category: "assistance",
            equipmentMap: {
                full: "45-Degree Hyperextensions",
                commercial: "Back Extensions",
                minimal: "Superman",
                bodyweight: "Superman"
            }
        },
        sledDrag: {
            name: "Sled Work",
            category: "assistance",
            equipmentMap: {
                full: "Sled Drags",
                commercial: "Farmer's Walks",
                minimal: "Band Walks",
                bodyweight: "Bear Crawls"
            }
        },
        
        // Core
        abs: {
            name: "Weighted Abs",
            category: "assistance",
            equipmentMap: {
                full: "Cable Crunches",
                commercial: "Weighted Sit-ups",
                minimal: "Band Crunches",
                bodyweight: "V-Ups"
            }
        }
    };

    // ==================== TEMPLATES ====================
    const Templates = {
        '4day': {
            beginner: {
                'early-offseason': {
                    monday: {
                        title: "Max-Effort Upper Body",
                        exercises: [
                            { type: "max-effort", exercise: "benchPress", sets: "Work up to 5RM", note: "Leave 1-2 reps in tank" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "2 × 15-20", note: "Same weight both sets" },
                            { type: "assistance", exercise: "rows", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "rearDelts", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "shrugs", sets: "3 × 8-15" },
                            { type: "assistance", exercise: "curls", sets: "3 × 8-15" }
                        ]
                    },
                    tuesday: {
                        title: "Dynamic-Effort Lower Body",
                        exercises: [
                            { type: "dynamic", exercise: "boxJump", sets: "5 × 3", note: "Focus on landing mechanics" },
                            { type: "assistance", exercise: "bulgarianSplitSquat", sets: "2 × 8-10 each" },
                            { type: "assistance", exercise: "rdl", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "abs", sets: "4 × 10-15" }
                        ]
                    },
                    thursday: {
                        title: "Repetition Upper Body",
                        exercises: [
                            { type: "repetition", exercise: "dbIncline", sets: "3 × max reps", note: "90 sec rest" },
                            { type: "assistance", exercise: "pullups", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "facePulls", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "shrugs", sets: "3 × 8-10" },
                            { type: "assistance", exercise: "curls", sets: "3 × 8-10" }
                        ]
                    },
                    friday: {
                        title: "Max-Effort Lower Body",
                        exercises: [
                            { type: "max-effort", exercise: "boxSquat", sets: "Work up to 5RM", note: "Conservative loading" },
                            { type: "assistance", exercise: "lunges", sets: "3 × 8-12 each" },
                            { type: "assistance", exercise: "hyperextensions", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "abs", sets: "2-3 circuits" }
                        ]
                    }
                },
                'mid-offseason': {
                    monday: {
                        title: "Max-Effort Upper Body",
                        exercises: [
                            { type: "max-effort", exercise: "benchPress", sets: "Work up to 3RM", note: "True 3RM attempt" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "2 × max reps", note: "15-20 rep range" },
                            { type: "assistance", exercise: "rows", sets: "4 × 8-12" },
                            { type: "assistance", exercise: "rearDelts", sets: "4 × 8-12" },
                            { type: "assistance", exercise: "shrugs", sets: "4 × 8-15" },
                            { type: "assistance", exercise: "curls", sets: "4 × 8-15" }
                        ]
                    },
                    tuesday: {
                        title: "Dynamic-Effort Lower Body",
                        exercises: [
                            { type: "dynamic", exercise: "boxJump", sets: "6 × 3", note: "Increase box height" },
                            { type: "dynamic", exercise: "broadJump", sets: "4 × 2", note: "Max effort jumps" },
                            { type: "assistance", exercise: "bulgarianSplitSquat", sets: "3 × 8-10 each" },
                            { type: "assistance", exercise: "rdl", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "sledDrag", sets: "3 × 40 yards" },
                            { type: "assistance", exercise: "abs", sets: "4 × 10-15" }
                        ]
                    },
                    thursday: {
                        title: "Repetition Upper Body",
                        exercises: [
                            { type: "repetition", exercise: "dbIncline", sets: "3 × max reps", note: "3 min rest" },
                            { type: "assistance", exercise: "pullups", sets: "4 × 8-12" },
                            { type: "assistance", exercise: "facePulls", sets: "4 × 8-12" },
                            { type: "assistance", exercise: "shrugs", sets: "3 × 8-10" },
                            { type: "assistance", exercise: "curls", sets: "3 × 8-10" }
                        ]
                    },
                    friday: {
                        title: "Max-Effort Lower Body",
                        exercises: [
                            { type: "max-effort", exercise: "deadlift", sets: "Work up to 3RM", note: "True 3RM attempt" },
                            { type: "assistance", exercise: "lunges", sets: "3 × 6-12 each" },
                            { type: "assistance", exercise: "hyperextensions", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "abs", sets: "3 circuits" }
                        ]
                    }
                }
            },
            intermediate: {
                'mid-offseason': {
                    monday: {
                        title: "Max-Effort Upper Body",
                        exercises: [
                            { type: "max-effort", exercise: "inclineBench", sets: "Work up to 3RM", note: "Rotate weekly" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "2 × max reps", note: "Heavy weight" },
                            { type: "assistance", exercise: "rows", sets: "4 × 6-10" },
                            { type: "assistance", exercise: "rearDelts", sets: "4 × 10-15" },
                            { type: "assistance", exercise: "shrugs", sets: "4 × 8-12" },
                            { type: "assistance", exercise: "curls", sets: "4 × 8-12" }
                        ]
                    },
                    tuesday: {
                        title: "Dynamic-Effort Lower Body",
                        exercises: [
                            { type: "dynamic", exercise: "boxJump", sets: "8 × 3", note: "Max height" },
                            { type: "dynamic", exercise: "broadJump", sets: "5 × 2", note: "Full recovery" },
                            { type: "assistance", exercise: "bulgarianSplitSquat", sets: "3 × 6-10 each" },
                            { type: "assistance", exercise: "rdl", sets: "3 × 6-10" },
                            { type: "assistance", exercise: "sledDrag", sets: "4 × 40 yards" },
                            { type: "assistance", exercise: "abs", sets: "4 × 10-20" }
                        ]
                    },
                    thursday: {
                        title: "Repetition Upper Body",
                        exercises: [
                            { type: "repetition", exercise: "dbBenchPress", sets: "4 × 12-15", note: "Bodybuilding style" },
                            { type: "assistance", exercise: "pullups", sets: "4 × max-2" },
                            { type: "assistance", exercise: "facePulls", sets: "4 × 12-15" },
                            { type: "assistance", exercise: "shrugs", sets: "4 × 8-10" },
                            { type: "assistance", exercise: "curls", sets: "4 × 8-10" }
                        ]
                    },
                    friday: {
                        title: "Max-Effort Lower Body",
                        exercises: [
                            { type: "max-effort", exercise: "frontSquat", sets: "Work up to 3RM", note: "Full depth" },
                            { type: "assistance", exercise: "lunges", sets: "3 × 6-10 each" },
                            { type: "assistance", exercise: "hyperextensions", sets: "3 × 10-15" },
                            { type: "assistance", exercise: "abs", sets: "3-4 circuits" }
                        ]
                    }
                },
                'preseason': {
                    monday: {
                        title: "Max-Effort Upper Body",
                        exercises: [
                            { type: "max-effort", exercise: "benchPress", sets: "2 × 3 @ 80-85%", note: "Not true max" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "2 × 12-15", note: "Moderate weight" },
                            { type: "assistance", exercise: "rows", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "rearDelts", sets: "3 × 10-12" },
                            { type: "assistance", exercise: "curls", sets: "2 × 10-12" }
                        ]
                    },
                    tuesday: {
                        title: "Speed & Jump Training",
                        exercises: [
                            { type: "sprint", exercise: "10yd sprints", sets: "8 × 10 yards", note: "Full recovery" },
                            { type: "dynamic", exercise: "verticalJump", sets: "5 × 3", note: "Max effort" },
                            { type: "assistance", exercise: "bulgarianSplitSquat", sets: "2 × 8 each" },
                            { type: "assistance", exercise: "abs", sets: "3 × 15-20" }
                        ]
                    },
                    thursday: {
                        title: "Max-Effort Lower Body & Conditioning",
                        exercises: [
                            { type: "max-effort", exercise: "boxSquat", sets: "2 × 3 @ 75-80%", note: "Speed focus" },
                            { type: "assistance", exercise: "hyperextensions", sets: "3 × 10" },
                            { type: "conditioning", exercise: "prowler", sets: "6 × 30 yards", note: "Or sled drags" }
                        ]
                    },
                    friday: {
                        title: "Repetition Upper Body",
                        exercises: [
                            { type: "repetition", exercise: "dbIncline", sets: "3 × 10-12", note: "Not to failure" },
                            { type: "assistance", exercise: "pullups", sets: "3 × 8-10" },
                            { type: "assistance", exercise: "facePulls", sets: "3 × 12-15" },
                            { type: "assistance", exercise: "abs", sets: "3 × 15-20" }
                        ]
                    }
                }
            },
            advanced: {
                'mid-offseason': {
                    monday: {
                        title: "Max-Effort Upper Body",
                        exercises: [
                            { type: "max-effort", exercise: "closeGripBench", sets: "Work up to 1RM", note: "Weekly rotation" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "2 × max reps", note: "Heavy DBs" },
                            { type: "assistance", exercise: "rows", sets: "5 × 5-8" },
                            { type: "assistance", exercise: "rearDelts", sets: "4 × 12-15" },
                            { type: "assistance", exercise: "shrugs", sets: "4 × 8-10" },
                            { type: "assistance", exercise: "curls", sets: "4 × 8-10" }
                        ]
                    },
                    tuesday: {
                        title: "Dynamic-Effort Lower Body",
                        exercises: [
                            { type: "dynamic", exercise: "boxJump", sets: "10 × 1", note: "Max height attempts" },
                            { type: "dynamic", exercise: "broadJump", sets: "6 × 1", note: "Max distance" },
                            { type: "assistance", exercise: "bulgarianSplitSquat", sets: "3 × 5-8 each" },
                            { type: "assistance", exercise: "rdl", sets: "3 × 5-8" },
                            { type: "assistance", exercise: "sledDrag", sets: "5 × 40 yards" },
                            { type: "assistance", exercise: "abs", sets: "4 × 15-25" }
                        ]
                    },
                    thursday: {
                        title: "Repetition Upper Body",
                        exercises: [
                            { type: "repetition", exercise: "dbBenchPress", sets: "5 × 10", note: "Heavy volume" },
                            { type: "assistance", exercise: "pullups", sets: "5 × max-1" },
                            { type: "assistance", exercise: "facePulls", sets: "5 × 15-20" },
                            { type: "assistance", exercise: "shrugs", sets: "4 × 8-10" },
                            { type: "assistance", exercise: "curls", sets: "4 × 8-10" }
                        ]
                    },
                    friday: {
                        title: "Max-Effort Lower Body",
                        exercises: [
                            { type: "max-effort", exercise: "deadlift", sets: "Singles up to 90-95%", note: "Competition stance" },
                            { type: "assistance", exercise: "lunges", sets: "3 × 5-8 each" },
                            { type: "assistance", exercise: "hyperextensions", sets: "3 × 12-15" },
                            { type: "assistance", exercise: "abs", sets: "4 circuits" }
                        ]
                    }
                }
            }
        },
        '3day': {
            beginner: {
                'early-offseason': {
                    monday: {
                        title: "Max-Effort Upper Body",
                        exercises: [
                            { type: "max-effort", exercise: "benchPress", sets: "Work up to 5RM", note: "Focus on form" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "3 × 12-15" },
                            { type: "assistance", exercise: "rows", sets: "4 × 10-12" },
                            { type: "assistance", exercise: "facePulls", sets: "3 × 12-15" },
                            { type: "assistance", exercise: "curls", sets: "3 × 10-12" }
                        ]
                    },
                    wednesday: {
                        title: "Max-Effort Lower Body",
                        exercises: [
                            { type: "max-effort", exercise: "boxSquat", sets: "Work up to 5RM", note: "Proper depth" },
                            { type: "assistance", exercise: "lunges", sets: "3 × 10 each" },
                            { type: "assistance", exercise: "rdl", sets: "3 × 10-12" },
                            { type: "assistance", exercise: "abs", sets: "3 × 15-20" }
                        ]
                    },
                    friday: {
                        title: "Repetition Upper Body",
                        exercises: [
                            { type: "repetition", exercise: "dbIncline", sets: "3 × max reps", note: "Leave 1-2 in tank" },
                            { type: "assistance", exercise: "pullups", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "rearDelts", sets: "3 × 12-15" },
                            { type: "assistance", exercise: "shrugs", sets: "3 × 10-12" }
                        ]
                    }
                }
            }
        },
        'inseason': {
            all: {
                'inseason': {
                    monday: {
                        title: "In-Season Maintenance A",
                        exercises: [
                            { type: "max-effort", exercise: "benchPress", sets: "Work up to 5RM", note: "Conservative load" },
                            { type: "assistance", exercise: "bulgarianSplitSquat", sets: "3 × 8" },
                            { type: "assistance", exercise: "rows", sets: "3 × 10-12" },
                            { type: "assistance", exercise: "shrugs", sets: "3 × 10-12" },
                            { type: "assistance", exercise: "abs", sets: "2 circuits" }
                        ]
                    },
                    wednesday: {
                        title: "In-Season Maintenance B",
                        exercises: [
                            { type: "dynamic", exercise: "boxJump", sets: "3 × 3", note: "Neural activation" },
                            { type: "max-effort", exercise: "boxSquat", sets: "6 × 2 @ 60%", note: "Speed work" },
                            { type: "supplemental", exercise: "dbBenchPress", sets: "3 × 8-12" },
                            { type: "assistance", exercise: "facePulls", sets: "3 × 12-15" },
                            { type: "assistance", exercise: "abs", sets: "2 × 10-15" }
                        ]
                    }
                }
            }
        }
    };

    // ==================== UI FUNCTIONS ====================
    function startOnboarding() {
        document.getElementById('welcomeScreen').classList.add('hidden');
        document.getElementById('progressTracker').classList.remove('hidden');
        document.getElementById('experienceScreen').classList.remove('hidden');
        document.getElementById('experienceScreen').classList.add('fade-in');
        updateProgressTracker(1);
    }

    function updateProgressTracker(step) {
        // Reset all steps
        document.querySelectorAll('.progress-step').forEach((el, idx) => {
            if (idx < step - 1) {
                el.classList.add('completed');
                el.classList.remove('active');
            } else if (idx === step - 1) {
                el.classList.add('active');
                el.classList.remove('completed');
            } else {
                el.classList.remove('active', 'completed');
            }
        });
    }

    function selectExperience(level) {
        userData.experience = level;
        document.querySelectorAll('#experienceScreen .option-card').forEach(opt => {
            opt.classList.remove('selected');
        });
        event.target.closest('.option-card').classList.add('selected');
        document.getElementById('experienceContinue').classList.remove('hidden');
    }

    function showPhaseScreen() {
        document.getElementById('experienceScreen').classList.add('hidden');
        document.getElementById('phaseScreen').classList.remove('hidden');
        document.getElementById('phaseScreen').classList.add('fade-in');
        updateProgressTracker(2);
    }

    function selectPhase(phase) {
        userData.phase = phase;
        document.querySelectorAll('#phaseScreen .option-card').forEach(opt => {
            opt.classList.remove('selected');
        });
        event.target.closest('.option-card').classList.add('selected');
        document.getElementById('phaseContinue').classList.remove('hidden');
    }

    function showContextScreen() {
        document.getElementById('phaseScreen').classList.add('hidden');
        document.getElementById('contextScreen').classList.remove('hidden');
        document.getElementById('contextScreen').classList.add('fade-in');
        updateProgressTracker(3);
    }

    function selectContext(context) {
        userData.context = context;
        document.querySelectorAll('#contextScreen .option-card').forEach(opt => {
            opt.classList.remove('selected');
        });
        event.target.closest('.option-card').classList.add('selected');
        document.getElementById('contextContinue').classList.remove('hidden');
    }

    function showEquipmentScreen() {
        document.getElementById('contextScreen').classList.add('hidden');
        document.getElementById('equipmentScreen').classList.remove('hidden');
        document.getElementById('equipmentScreen').classList.add('fade-in');
        updateProgressTracker(4);
    }

    function selectEquipment(equipment) {
        userData.equipment = equipment;
        document.querySelectorAll('#equipmentScreen .option-card').forEach(opt => {
            opt.classList.remove('selected');
        });
        event.target.closest('.option-card').classList.add('selected');
        document.getElementById('equipmentContinue').classList.remove('hidden');
    }

    function goBack(screen) {
        document.querySelectorAll('.card').forEach(card => {
            card.parentElement.classList.add('hidden');
        });
        
        switch(screen) {
            case 'welcome':
                document.getElementById('welcomeScreen').classList.remove('hidden');
                document.getElementById('progressTracker').classList.add('hidden');
                break;
            case 'experience':
                document.getElementById('experienceScreen').classList.remove('hidden');
                updateProgressTracker(1);
                break;
            case 'phase':
                document.getElementById('phaseScreen').classList.remove('hidden');
                updateProgressTracker(2);
                break;
            case 'context':
                document.getElementById('contextScreen').classList.remove('hidden');
                updateProgressTracker(3);
                break;
        }
    }

    function generateProgram() {
        document.getElementById('equipmentScreen').classList.add('hidden');
        document.getElementById('progressTracker').classList.add('hidden');
        document.getElementById('programScreen').classList.remove('hidden');
        document.getElementById('programScreen').classList.add('fade-in');
        updateProgressTracker(5);
        
        // Set program title
        const phaseNames = {
            'early-offseason': 'Early Off-Season',
            'mid-offseason': 'Mid Off-Season',
            'preseason': 'Pre-Season',
            'inseason': 'In-Season'
        };
        
        const experienceNames = {
            'beginner': 'Beginner',
            'intermediate': 'Intermediate',
            'advanced': 'Advanced'
        };
        
        document.getElementById('programTitle').textContent = 
            `${experienceNames[userData.experience]} - ${phaseNames[userData.phase]} Program`;
        
        // Generate overview
        generateProgramOverview();
        
        // Select appropriate template
        if (userData.phase === 'inseason') {
            userData.currentTemplate = 'inseason';
        } else if (userData.context === 'meathead') {
            userData.currentTemplate = '3day';
        } else {
            userData.currentTemplate = '4day';
        }
        
        // Render workouts
        renderWorkouts();
    }

    function generateProgramOverview() {
        const overview = document.getElementById('programOverview');
        
        const phaseGuidelines = {
            'early-offseason': 'Focus on recovery, movement quality, and building base strength. Conservative loading.',
            'mid-offseason': 'Maximum strength and muscle building phase. Highest training volumes.',
            'preseason': 'Converting strength to power. Sport-specific preparation.',
            'inseason': 'Maintenance focus. Managing fatigue while staying game-ready.'
        };
        
        const contextNotes = {
            'franchise': 'Adapted for group training environment with time constraints',
            'remote': 'Flexible programming for variable equipment access',
            'team': 'Designed for team training with mixed ability levels',
            'meathead': 'Former athlete focus - strength with health consideration'
        };
        
        overview.innerHTML = `
            <h4>Your Program Overview</h4>
            <ul>
                <li><strong>Phase Focus:</strong> ${phaseGuidelines[userData.phase]}</li>
                <li><strong>Context:</strong> ${contextNotes[userData.context]}</li>
                <li><strong>Equipment Level:</strong> ${userData.equipment.charAt(0).toUpperCase() + userData.equipment.slice(1)} gym setup</li>
                <li><strong>Weekly Volume:</strong> ${userData.currentTemplate === '4day' ? '4 training days' : 
                    userData.currentTemplate === '3day' ? '3 training days' : '2-3 flexible days'}</li>
                <li><strong>Key Focus:</strong> ${userData.phase === 'inseason' ? 'Maintain strength, prevent injury' : 
                    'Progressive overload, track indicator lifts'}</li>
            </ul>
        `;
    }

    function selectTemplate(template) {
        userData.currentTemplate = template;
        
        // Update UI
        document.querySelectorAll('.template-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        event.target.classList.add('active');
        
        renderWorkouts();
    }

    function renderWorkouts() {
        const container = document.getElementById('workoutDays');
        
        // Get appropriate template
        let workouts;
        if (userData.currentTemplate === 'inseason') {
            workouts = Templates.inseason.all.inseason;
        } else {
            // Try to get experience-phase specific, fallback to available
            const templateSet = Templates[userData.currentTemplate];
            const experienceSet = templateSet[userData.experience] || templateSet.beginner;
            workouts = experienceSet[userData.phase] || experienceSet['early-offseason'] || experienceSet['mid-offseason'];
        }
        
        if (!workouts) {
            container.innerHTML = '<p>Template not yet available for this combination. Using default 4-day template.</p>';
            workouts = Templates['4day'].beginner['early-offseason'];
        }
        
        let html = '';
        
        Object.entries(workouts).forEach(([day, workout]) => {
            html += `
                <div class="workout-day">
                    <div class="workout-header">
                        <div class="workout-title">${day.charAt(0).toUpperCase() + day.slice(1)}: ${workout.title}</div>
                        <div class="workout-badge">${day}</div>
                    </div>
            `;
            
            workout.exercises.forEach(exercise => {
                const exerciseData = exerciseDatabase[exercise.exercise];
                let exerciseName = exercise.exercise;
                let isSubstituted = false;
                
                if (exerciseData && exerciseData.equipmentMap) {
                    exerciseName = exerciseData.equipmentMap[userData.equipment];
                    if (exerciseName !== exerciseData.name) {
                        isSubstituted = true;
                    }
                }
                
                let categoryClass = 'category-assistance';
                if (exercise.type === 'max-effort') categoryClass = 'category-max-effort';
                else if (exercise.type === 'dynamic') categoryClass = 'category-dynamic';
                else if (exercise.type === 'repetition') categoryClass = 'category-repetition';
                else if (exercise.type === 'supplemental') categoryClass = 'category-supplemental';
                else if (exercise.type === 'sprint') categoryClass = 'category-sprint';
                else if (exercise.type === 'conditioning') categoryClass = 'category-jump';
                
                html += `
                    <div class="exercise-block">
                        <span class="exercise-category ${categoryClass}">${exercise.type}</span>
                        <div class="exercise-name">${exerciseName || exercise.exercise}</div>
                        <div class="exercise-details">Sets/Reps: ${exercise.sets}</div>
                        ${exercise.note ? `<div class="exercise-details">Note: ${exercise.note}</div>` : ''}
                        ${isSubstituted ? `<div class="substitution-notice">Adapted for ${userData.equipment} equipment</div>` : ''}
                    </div>
                `;
            });
            
            html += `</div>`;
        });
        
        container.innerHTML = html;
    }

    function previousWeek() {
        if (userData.currentWeek > 1) {
            userData.currentWeek--;
            document.getElementById('weekDisplay').textContent = `Week ${userData.currentWeek}`;
            // In a real implementation, this would load different workout variations
        }
    }

    function nextWeek() {
        if (userData.currentWeek < 12) {
            userData.currentWeek++;
            document.getElementById('weekDisplay').textContent = `Week ${userData.currentWeek}`;
            // In a real implementation, this would load different workout variations
        }
    }

    function resetApp() {
        if (confirm('Start over with a new program setup?')) {
            userData = {
                experience: null,
                phase: null,
                context: null,
                equipment: null,
                currentWeek: 1,
                currentTemplate: '4day'
            };
            
            // Hide all screens
            document.querySelectorAll('.card').forEach(card => {
                card.parentElement.classList.add('hidden');
            });
            
            // Show welcome
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('progressTracker').classList.add('hidden');
            
            // Reset selections
            document.querySelectorAll('.selected').forEach(el => {
                el.classList.remove('selected');
            });
            
            // Hide continue buttons
            document.querySelectorAll('.btn').forEach(btn => {
                if (btn.textContent.includes('Continue')) {
                    btn.classList.add('hidden');
                }
            });
        }
    }

    // ==================== INITIALIZATION ====================
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Athletic Development System Loaded');
        
        // Set up week navigation
        document.getElementById('prevWeekBtn').disabled = true;
    });
</script>
</body>
</html>
